import dash
from dash import html, Dash
import dash_kaplan_meier as dkm
from dash_kaplan_meier.survival_stats import compute_survival_stats

# Example data
curves: dict = {
    "time":     [41.0625637,0.427392577,39.51737515,10.29029819,60,60,37.0187724,60,17.85185916,32.77772298,60,60,60,60,60,60,46.55291449,60,28.27366275,54.0158464,23.21070454,60,37.9064339,17.58884834,19.59430582,24.62438768,29.0626952,42.34474143,15.94503074,31.98869054,31.98869054,36.328369,33.07361015,30.14761482,60,60,28.63530263,24.72301673,34.94756222,25.51204918,14.95874018,18.41075714,16.83269224,20.25183286,14.43271855,10.25742184,21.13949436,19.79156393,29.39145872,35.14482033,34.35578788,34.15852977,18.11486997,18.08199362,18.90390242,33.89551895,1.643817602,14.66285301,22.4874248,22.25729033,17.06282671,20.81073084,21.20524707,15.61626722,15.3532564,15.94503074,16.8655686,16.8655686,22.32304304,12.8217773,20.77785449,35.11194398,60,21.99427952,23.3093336,60,48.03235033,60,57.79662689,45.53374758,36.88726699,23.86823158,20.9093599,48.78850643,60,60,60,60,60,36.36124536,60,46.71729625,60,27.12299043,60,33.40237367,60,60,49.215899,25.08465661,60,60,55.88979847,31.29828714,35.53933656,46.78304895,49.1501463,6.706775816,60,45.8625111,27.84627018,51.12272742,36.13111089,0.558897985,13.57793339,33.20511556,29.68734589,60,60,60,35.34207844,45.9940165,60,49.87342605,60,57.46786337,27.38600125,30.01610941,60,60,37.77492849,40.10914949,60,13.28204622,32.90922839,34.65167505,25.51204918,26.36683434,32.02156689,25.90656541,34.09277707,60,60,60,60,37.57767038,4.767071046,30.11473847,60,40.79955288,60,34.32291153,46.48716179,38.23519742,17.7532301,30.73938916,2.958871684,31.13390538,60,43.82417727,20.51484367,18.34500444,14.4655949,60,56.90896538,60,55.29802413,59.24318638,60,58.7500411,60,60,48.59124832,36.49275076,60,27.28737219,57.76375053,60,60,27.84627018,13.44642798,59.83496071,60,60,60,60,54.44323898,60,60,60,52.04326528,32.08731959,60,60,16.73406319,19.56142946,19.49567676,18.41075714,17.35871388,16.56968143,60,60,50.89259296,51.45149094,14.69572936,48.42686656,11.86836309,52.53641056,31.36403985,60,60,60,60,39.35299339,27.64901207,29.65446954,41.0625637,34.12565342,34.94756222,18.60801526,20.18608015,19.331295,20.94223625,35.21057304,60,22.06003222,60,60,10.71769077,41.52283263,48.55837196,23.47371536,43.29815564,43.03514482,59.73633166,21.17237071,20.28470921,15.41900911,51.55012,51.05697472,52.01038893,34.29003518,52.63503962,52.83229773,56.58020186,14.82723477,12.55876648,13.77519151,14.72860571,14.00532597,15.45188546,15.45188546,9.567018444,23.70384982,20.12032745,11.3094651,22.38879574,35.90097643,34.98043857,35.90097643,35.07906763,31.00239997,31.75855607,24.98602755,24.1312424,16.63543413,13.18341717,10.02728737,9.862905612,46.94743071,24.32850051,60,60,4.799947398,60,60,60,60,30.73938916,60,60,60,60,60,60,60,60,59.50619719,60,60,60,60,60,16.83269224,19.79156393,29.95035671,8.54785153,0.558897985,4.865700102,28.66817898,23.93398429,22.5531775,1.742446658,4.438307525,21.99427952,39.4844988,30.08186212,29.884604,1.906828418,3.682151429,29.32570602,32.58046487,0.657527041,15.71489628,36.09823454,37.31465957,36.36124536,37.51191768,36.78863793,27.4188776,11.50672321,29.91748036,31.06815268,33.63250814,10.65193806,0.690403393,18.67376796,3.945162245,3.649275076,17.49021929,19.52855311,30.14761482,18.01624092,1.578064898,7.002662985,0.986290561,30.44350199,1.28217773,28.01065194,28.07640464,26.36683434,10.22454548,1.512312194,1.77532301,11.14508334,24.29562416,2.334220995,22.91481737,1.413683138,13.21629352,0.723279745,18.24637538,16.8655686,18.01624092,2.071210179,15.05736923,1.052043265,3.945162245,47.83509222,58.94729921,15.87927804,4.273925765,18.83814972,17.29296117,60,60,60,27.15586679,25.90656541,16.30667061,39.28724069,36.62425617,24.29562416,35.3749548,9.369760331,60,23.3750863,60,58.94729921,2.367097347,45.56662393,33.30374462,16.0436598,7.364302857,16.79981589,10.91494888,49.1501463,37.70917579,60,60,60,46.25702732,57.59936877,51.51724365,51.41861459,19.3970477,34.38866423,50.7282112,35.14482033,38.07081566,27.15586679,46.42140908,26.95860867,22.25729033,16.33954696,38.46533189,51.08985107,54.14735181,53.88434099,24.36137686,27.15586679,23.34220995,23.34220995,22.78331196,33.33662097,32.71197028,19.2655423,18.83814972,17.88473551,17.62172469,22.02715587,16.1094125,32.77772298,15.81352533,11.07933064,37.05164875,19.331295,12.59164283,10.19166913,14.39984219,18.87102607,22.81618832,20.05457474,45.76388204,31.03527633,29.09557156,27.3531249,32.51471217,11.37521781,17.91761186,14.13683138,19.89019298,14.69572936,16.96419765,5.884867015,60,60,39.87901502,60,7.988953546,13.84094421,25.21616202,60,59.01305191,9.336883979,28.9311898,60,30.67363645,59.27606273,60,17.7532301,14.03820232,13.28204622,9.468389388,26.10382352,18.21349903,23.24358089,38.69546635,22.58605385,8.186211658,17.16145577,6.969786633,22.65180656,39.94476773,24.9531512,23.63809712,14.82723477,4.438307525,20.74497814,18.27925173,0.230134464],
    "event":    [0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,1,1,1,0,0,0,0,1,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,0,0,0,0,0,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,1,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,1,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,1,1,0,0,1,0,0,0,1,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,0,0,0,0,1,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0],
    "group":    ['G2','G1','G2','G2','G3','G3','G3','G3','G3','G3','G2','G3','G2','G2','G1','G1','G1','G1','G1','G1','G3','G2','G3','G2','G2','G2','G2','G3','G3','G3','G3','G3','G2','G3','G3','G3','G3','G3','G3','G3','G3','G3','G2','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G2','G1','G2','G3','G3','G3','G3','G3','G3','G3','G3','G3','G1','G1','G3','G3','G3','G3','G3','G3','G3','G3','G1','G1','G3','G1','G2','G1','G2','G2','G1','G3','G3','G1','G2','G2','G3','G2','G3','G2','G2','G3','G2','G3','G3','G3','G1','G1','G1','G1','G2','G3','G1','G2','G2','G3','G3','G1','G3','G1','G2','G3','G2','G2','G2','G3','G3','G3','G2','G3','G3','G3','G3','G1','G2','G2','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G1','G1','G2','G2','G3','G3','G3','G1','G1','G1','G3','G2','G1','G1','G3','G1','G3','G2','G1','G2','G3','G2','G2','G1','G1','G3','G1','G3','G2','G3','G1','G2','G1','G1','G1','G3','G3','G3','G2','G3','G3','G3','G1','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G2','G2','G1','G2','G2','G3','G3','G2','G2','G3','G1','G1','G2','G3','G1','G1','G2','G1','G2','G2','G1','G1','G1','G1','G2','G1','G1','G3','G2','G2','G1','G2','G2','G3','G3','G3','G3','G3','G1','G3','G2','G3','G3','G3','G2','G3','G3','G1','G2','G2','G3','G3','G1','G1','G3','G2','G3','G3','G1','G2','G1','G3','G1','G3','G1','G1','G2','G3','G1','G1','G1','G2','G3','G2','G1','G1','G3','G2','G2','G3','G2','G2','G3','G2','G2','G1','G3','G1','G3','G2','G2','G1','G2','G1','G2','G3','G2','G2','G2','G1','G3','G3','G2','G3','G1','G2','G1','G3','G3','G2','G1','G3','G2','G2','G3','G2','G1','G3','G2','G1','G2','G1','G1','G2','G2','G2','G1','G2','G2','G1','G3','G3','G3','G3','G1','G3','G1','G1','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G2','G2','G3','G3','G3','G3','G3','G3','G3','G3','G3','G2','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G1','G1','G2','G2','G2','G3','G2','G3','G2','G1','G3','G3','G3','G1','G2','G3','G3','G2','G2','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G1','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G3','G2','G2','G2','G1','G1','G2','G2','G3','G1','G2','G3']
}

time        = curves['time']
event       = curves['event']
group       = curves['group']

# Compute statistics
stats       = compute_survival_stats(time ,event, group)

# Dash app
app         = Dash()

# Dash app layout with DashKaplanMeier component
app.layout  = html.Div([
    dkm.DashKaplanMeier(
        id              = 'km-example',
        time            = time,
        event           = event,
        group           = group,
        showCIs         = True,
        colors          = ['blue', 'green', 'red'],
        showStatistics  = True,
        logrankP        = stats["logrank_p"],
        coxP            = stats["cox_p"],
        hazardRatio     = stats["hazard_ratio"],
        layout          ={  'title': 'Kaplan-Meier Survival Curve Example',
                            'xaxis': {'title': 'Time'},
                            'yaxis': {'title': 'Survival Probability'}},
        title           = "Kaplan-Meier curves",
        config          = {'responsive': True}
    )
])

if __name__ == '__main__':
    app.run(debug=True)
